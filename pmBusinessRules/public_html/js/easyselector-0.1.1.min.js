var EasySelector=function(a){this.existingValue=this.listMaxHeight=this.listHtmlBackup=this.isOpenSettings=this.isOpen=this.dom=this.html=this.value=this.label=null;this.settingOptions=[];this.width=null;this.options=[];this.onSettingValueChange=this.settingValue=this.configurable=null;EasySelector.prototype.init.call(this,a)};
EasySelector.prototype.init=function(a){var b={options:[],listMaxHeight:200,width:240,settingOptions:[],configurable:!0,settingValue:null,onSettingValueChange:null};this.isOpenSettings=this.isOpen=!1;this.dom={};this.existingValue=!1;$.extend(!0,b,a);this.onSettingValueChange=b.onSettingValueChange;this.setOptions(b.options).setListMaxHeight(b.listMaxHeight).setWidth(b.width).setSettingOptions(b.settingOptions).setIsConfigurable(b.configurable).setSettingValue(b.settingValue)};
<<<<<<< HEAD
EasySelector.prototype.setIsConfigurable=function(a){this.configurable=!!a;this.html&&(a?($(this.dom.settings).show(),$(this.dom.arrow).css("right","")):(this.closeSettings(),$(this.dom.settings).hide(),$(this.dom.arrow).css("right","0px")),this.setWidth(this.width));return this};
EasySelector.prototype.setWidth=function(a){var b,c,d;"number"===typeof a?(this.width=a,b=a+"px"):parseInt(a,10)&&(b=this.width=a);this.html&&b&&(c=$(this.dom.input),$(this.html).css("width",b),/^\d+(\.\d+)*%$/.test(b)?c.css("width",""):(b=$(this.html).css("width",b).width(),this.html.parentElement?a=$(this.dom.arrow).outerWidth()+(this.configurable?$(this.dom.settings).outerWidth():0)+1:(d=this.html.cloneNode(!0),d.style.display="none",document.body.appendChild(d),a=$(d).find(".easyselector-arrow").outerWidth()+
(this.configurable?$(d).find(".easyselector-conf").outerWidth():0)+1,b=$(d).width(),$(d).remove()),b=b-a-(c.outerWidth()-c.width()),c.css("width",Math.floor(b)+"px")));return this};EasySelector.prototype.setSettingOptions=function(a){var b,c,d=!1;this.settingOptions=a;if(this.html){$(this.dom.settingOptions).empty();for(b=0;b<a.length;b++)c=this.createHTMLOption(a[b].label,a[b].value),a[b].selected&&(d=!0,$(c).addClass("selected")),this.dom.settingsPanel.appendChild(c);!d&&b&&$(this.dom.settingsPanel.childNodes[0]).addClass("selected")}return this};
=======
EasySelector.prototype.setIsConfigurable=function(a){this.configurable=!!a;this.html&&(a?$(this.dom.settings).show():(this.closeSettings(),$(this.dom.settings).hide()),this.setWidth(this.width));return this};
EasySelector.prototype.setWidth=function(a){var b,c;"number"===typeof a?(this.width=a,b=a+"px"):parseInt(a,10)&&(b=this.width=a);this.html&&b&&(c=$(this.dom.input),b=$(this.html).css("width",b).width(),a=$(this.dom.arrow).outerWidth()+(this.configurable?$(this.dom.settings).outerWidth():0)+1,b=1===a?parseInt(this.width,10)-(this.configurable?56:36):b-a-(c.outerWidth()-c.width()),c.css("width",Math.floor(b)+"px"));return this};
EasySelector.prototype.setSettingOptions=function(a){var b,c,d=!1;this.settingOptions=a;if(this.html){$(this.dom.settingOptions).empty();for(b=0;b<a.length;b++)c=this.createHTMLOption(a[b].label,a[b].value),a[b].selected&&(d=!0,$(c).addClass("selected")),this.dom.settingsPanel.appendChild(c);!d&&b&&$(this.dom.settingsPanel.childNodes[0]).addClass("selected")}return this};
>>>>>>> 80354ae4f46fc699aea88fee686acc34316a5115
EasySelector.prototype.setListMaxHeight=function(a){"number"===typeof a&&(this.listMaxHeight=a,this.html&&$(this.dom.list).css("max-height",a+"px"));return this};EasySelector.prototype.createHTMLOption=function(a,b){var c,d;c=document.createElement("li");d=document.createElement("a");d.appendChild(document.createTextNode(a));d.setAttribute("data-value",b);d.href="#";c.appendChild(d);return c};
EasySelector.prototype.addOption=function(a,b,c){this.options.push({label:a,value:b});this.html&&(this.dom.list.appendChild(this.createHTMLOption(a,b)),c&&this.setSelectedItem(a,b),this.listHtmlBackup=this.dom.list.cloneNode(!0));return this};
EasySelector.prototype.setOptions=function(a,b){var c;if(a.hasOwnProperty("length")&&a.push)if(this.html&&$(this.dom.list).empty(),b){if(this.html)for(c=0;c<this.listHtmlBackup.childNodes.length;c++)this.dom.list.appendChild(this.listHtmlBackup.childNodes[c].cloneNode(!0))}else{this.options=[];for(c=0;c<a.length;c++)this.addOption(a[c].label,a[c].value,a[c].selected)}return this};
EasySelector.prototype.processCurrentInput=function(){var a,b;if(this.html&&(a=$.trim(this.dom.input.value).toLowerCase()))for(b=0;b<this.options.length;b++)if(this.options[b].label===a)return this.setSelectedItem(this.options[b].label,this.options[b].value),this;this.setSelectedItem("","");return this};EasySelector.prototype.openSettings=function(){this.html&&!this.isOpenSettings&&($(this.dom.settingsPanel).show(),this.isOpenSettings=!0,this.close());return this};
EasySelector.prototype.open=function(){this.html&&!this.isOpen&&(this.closeSettings(),this.dom.list.style.width=$(this.html).width()+"px",$(this.html).addClass("expanded"),this.isOpen=!0);return this};EasySelector.prototype.closeSettings=function(){this.html&&this.isOpenSettings&&($(this.dom.settingsPanel).hide(),this.isOpenSettings=!1);return this};
EasySelector.prototype.close=function(){this.html&&this.isOpen&&($(this.html).removeClass("expanded"),this.isOpen=!1,this.existingValue||this.processCurrentInput());return this};EasySelector.prototype.setSelectedItem=function(a,b){this.label=a;this.value=b;this.html&&(this.dom.input.value=a);this.existingValue=!0;return this};
EasySelector.prototype.showSuggestions=function(a){var b,c,d=0;this.existingValue=!1;if(this.html&&"string"===typeof a){if(a){a=a.toLowerCase();c=a.length;$(this.dom.list).empty();for(b=0;b<this.options.length;b++)if(this.options[b].label.substr(0,c).toLowerCase()===a||this.options[b].value.substr(0,c).toLowerCase()===a)this.dom.list.appendChild(this.createHTMLOption(this.options[b].label,this.options[b].value)),d+=1;d||(a=document.createElement("li"),a.className="message",a.appendChild(document.createTextNode("No similar options")),
this.dom.list.appendChild(a))}else this.setOptions(this.options,!0);this.open()}return this};EasySelector.prototype.searchSuggestionsHandler=function(){var a=this;return function(b){27!==b.keyCode&&a.showSuggestions($.trim(this.value))}};
EasySelector.prototype.attachListeners=function(){var a=this;$(this.html).on("click","a",function(b){b.preventDefault();if($(this).parents("."+a.dom.settingsPanel.className).length)$(a.dom.settingsPanel).find("li.selected").removeClass("selected"),$(this.parentElement).addClass("selected"),a.closeSettings();else if(this.parentElement&&"li"===this.parentElement.tagName.toLowerCase())a.setSelectedItem(this.textContent,$(this).data("value")),a.close();else switch(this.className){case "easyselector-arrow":a.isOpen?
a.close():(a.setOptions(a.options,!0),a.open());break;case "easyselector-conf":$(".easyselector-settings:visible").length?a.closeSettings():a.openSettings()}});$(this.dom.input).on("keyup",a.searchSuggestionsHandler()).on("keydown",function(b){27===b.keyCode?(a.setSelectedItem("",""),a.close()):13===b.keyCode&&$(this).trigger("blur")}).on("focus",function(){a.setOptions(a.options,!0);a.open()}).on("change",function(){a.close()}).on("blur",function(){a.processCurrentInput()});$(document).on("click focusin",
function(b){$(b.target).parents(a.html).length||(a.close(),a.closeSettings())})};
<<<<<<< HEAD
EasySelector.prototype.createHTML=function(){var a,b,c,d,e,f;if(this.html)return this.html;a=document.createElement("div");a.className="easyselector";b=document.createElement("input");b.type="text";c=document.createElement("a");c.className="easyselector-arrow";c.href="#";e=document.createElement("div");e.innerHTML="&nbsp;";c.appendChild(e);d=document.createElement("a");d.className="easyselector-conf";d.href="#";e=e.cloneNode(!0);d.appendChild(e);e=document.createElement("ul");e.className="easyselector-list";
f=document.createElement("ul");f.className="easyselector-settings";a.appendChild(b);a.appendChild(d);a.appendChild(c);document.body.appendChild(f);document.body.appendChild(e);this.dom.input=b;this.dom.arrow=c;this.dom.settings=d;this.dom.list=e;this.dom.settingsPanel=f;this.html=a;this.setSettingOptions(this.settingOptions);this.setOptions(this.options);this.setListMaxHeight(this.listMaxHeight);this.setIsConfigurable(this.configurable);this.setSettingValue(this.settingValue);this.attachListeners();
return this.html};EasySelector.prototype.getHTML=function(){this.html||this.createHTML();return this.html};EasySelector.prototype.getValue=function(){return this.value};EasySelector.prototype.getLabel=function(){return this.label};
=======
EasySelector.prototype.createHTML=function(){var a,b,c,d,e,f;if(this.html)return html;a=document.createElement("div");a.className="easyselector";b=document.createElement("input");b.type="text";c=document.createElement("a");c.className="easyselector-arrow";c.href="#";e=document.createElement("div");e.innerHTML="&nbsp;";c.appendChild(e);d=document.createElement("a");d.className="easyselector-conf";d.href="#";e=e.cloneNode(!0);d.appendChild(e);e=document.createElement("ul");e.className="easyselector-list";
f=document.createElement("ul");f.className="easyselector-settings";a.appendChild(b);a.appendChild(d);a.appendChild(c);a.appendChild(e);a.appendChild(f);this.dom.input=b;this.dom.arrow=c;this.dom.settings=d;this.dom.list=e;this.dom.settingsPanel=f;this.html=a;this.setSettingOptions(this.settingOptions);this.setOptions(this.options);this.setListMaxHeight(this.listMaxHeight);this.setIsConfigurable(this.configurable);this.setSettingValue(this.settingValue);this.attachListeners();return this.html};
EasySelector.prototype.getHTML=function(){this.html||this.createHTML();return this.html};EasySelector.prototype.getValue=function(){return this.value};EasySelector.prototype.getLabel=function(){return this.label};
>>>>>>> 80354ae4f46fc699aea88fee686acc34316a5115
EasySelector.prototype.setSettingValue=function(a){var b=$(this.dom.settingsPanel),c=b.find("li.selected"),b=b.find("a[data-value="+a+"]"),d,e=!1;for(d=0;d<this.settingOptions.length;d++)if(this.settingOptions[d].value===a){this.settingValue=a;e=!0;break}b.length&&e&&(b.parent().addClass("selected"),c.removeClass("selected"));return this};EasySelector.prototype.getSettingValue=function(){return $(this.dom.settingsPanel).find("li.selected a").data("value")||null};
